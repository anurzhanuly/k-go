### Сравнение работы программ на PHP и на Go

У нас есть две одинаковые программы на обоих языках - `index.php` и `main.go`. Что они делают:

1. При запуске выводят сообщение о том, что запущены
2. Отвечают на HTTP запрос пользователя приветствием
3. После обработки запроса пишут в STDOUT о том, что запрос обработан.

Посмотрим, как они работают:

1. Запустим программу на go: `go run main.go` (запустит HTTP сервер на `http://localhost:8080`)
2. Запустим программу на php: `php -S localhost:8081 index.php`
3. Повыполняем запросы к серверу на go: `curl -XGET http://localhost:8080?name=Rob`
4. Повыполняем запросы к серверу на PHP: `curl -XGET http://localhost:8081?name=Pike`

Понаблюдаем за отличиями в их поведении:

1. Независимо от количества запросов к программе на go, сообщение "Программа на Go запускается" мы увидим только 1 раз.
А в программе на PHP будем видеть это сообщение на каждый запрос. Почему?
2. Попробуем изменить текст приветствия в обоих программах. Заметим, что изменения на PHP применяются сразу, а программу на go требуется перезапускать. Почему?

Также обратим внимание на функции для вывода текста:
В PHP стандартный способ вывода - `echo` или `print` - отправляет текст клиенту. А в go стандартная функция `fmt.Println` выводит текст не в ответ на запрос, а просто в консоль. Почему?

Чтобы разобраться, вспомним о том, как программы работают с вводом\выводом. Каждой запущенной программе выдаётся 3 "файла":
1. STDIN, или файл с дескриптором 0 - "стандартный ввод", откуда программе следует читать входные данные.
Например, команда `cat README.md | grep файл` передаст программе `grep` содержимое файла `README.md` в STDIN.
2. STDOUT, или файл с дескриптором 1 - "стандартный вывод", куда программе следует выводить данные.
3. Третий файл нас сейчас не интересует, но называется он "STDERR" и нужен для вывода ошибок.

Никто не обязан использовать файлы STDIN и STDOUT - это лишь соглашение, но большая часть софта его придерживается. В большинстве языков (как и в go) стандартные функции типа `print` или `fmt.Println` по-умолчанию выводят данные именно в STDOUT. То, что туда записалось, операционная система покажет в консоли.

Но PHP работает не так. В PHP есть отдельный "поток вывода", который отличается от STDOUT. Подробности: https://www.php.net/manual/en/wrappers.php.php.
(Кстати, об STDIN PHP тоже не любит "вспоминать"; вместо этого у него есть глобальные переменные `$_GET` и т.д.).

### Выводы:

1. PHP запускает отдельную программу на каждый запрос пользователя. 
Код PHP компилируется заново при каждом запросе, поэтому программу можно менять и сразу видеть изменения. Такой принцип работы не очень типичен.
2. Программы на Go ведут себя более "стандартно":
   * Во-первых, они не обязаны "быть веб-сервером"; запуск обработчика HTTP запросов - это явный шаг со стороны программиста.
   * Во-вторых, все запросы обрабатываются внутри одной и той же запущенной программы, поэтому изменения, внесённые в код после запуска сервера, не будут видны - ведь программу нужно перекомпилировать.
3. Важное следствие из предыдущего пункта: в Go состояние переменных сохраняется между всеми запросами. Можно записать в переменную что-то из последнего запроса и прочитать эту переменную при обработке следующего. В PHP так сделать нельзя (тут есть нюансы, продвинутым ребятам можно почитать про `shmop`).
4. Работа с вводом и выводом в Go и PHP существенно отличается:
   * Чтобы вывести текст клиенту, сделавшему запрос, в программе на Go нужно явно указать, куда писать данные (`fmt.Fprintf(w, ...`). А по-умолчанию всё будет записано STDOUT (в консоль). 
   * В PHP - наоборот: чтобы вывести что-то в STDOUT, придётся сделать это явно. А стандартные функции вывода типа `echo` пишут в "поток вывода" - клиенту, сделавшему запрос.
